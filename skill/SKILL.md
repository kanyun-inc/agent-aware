---
name: agent-aware
description: Web åº”ç”¨å®æ—¶ç›‘æ§ä¸è‡ªåŠ¨ä¿®å¤ã€‚æ£€æµ‹ç”¨æˆ·æŒ«æŠ˜ä¿¡å·ï¼ˆç‹‚ç‚¹ã€æ— æ•ˆç‚¹å‡»ï¼‰å’Œè¿è¡Œæ—¶é”™è¯¯ï¼Œå¼•å¯¼ä¿®å¤ã€‚åœ¨ç”Ÿæˆæˆ–ä¿®æ”¹ Web åº”ç”¨ä»£ç åä¸»åŠ¨ä½¿ç”¨ï¼Œæˆ–è°ƒè¯•ç”¨æˆ·ä½“éªŒé—®é¢˜æ—¶ä½¿ç”¨ã€‚
---

# Agent-aware ä½¿ç”¨æŒ‡å—

Web åº”ç”¨ç”¨æˆ·è¡Œä¸ºå®æ—¶ç›‘æ§ä¸é—®é¢˜è‡ªåŠ¨æ£€æµ‹å·¥å…·ã€‚

## é€‚ç”¨åœºæ™¯

- ç”Ÿæˆæˆ–ä¿®æ”¹ Web åº”ç”¨ä»£ç åï¼Œä¸»åŠ¨ç›‘æ§ç”¨æˆ·æµ‹è¯•
- è°ƒè¯•ç”¨æˆ·ä½“éªŒé—®é¢˜ï¼ˆç‚¹å‡»æ— å“åº”ã€æ“ä½œå¡é¡¿ï¼‰
- æ£€æµ‹è¿è¡Œæ—¶é”™è¯¯å¹¶å®šä½ä¿®å¤

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

åœ¨**å½“å‰é¡¹ç›®æ ¹ç›®å½•**ï¼ˆåŒ…å« `package.json` çš„ç›®å½•ï¼‰å®‰è£…ä¾èµ–ï¼š

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
npm install --save-dev @reskill/agent-aware-server @reskill/agent-aware
```

### æœ€å°é…ç½®

**1. å¯åŠ¨æœåŠ¡**

```bash
npx agent-aware-server start
```

**2. åœ¨åº”ç”¨å…¥å£åˆå§‹åŒ– SDK**

æ‰¾åˆ°å…¥å£æ–‡ä»¶ï¼ˆReact: `main.tsx`ï¼ŒVue: `main.ts`ï¼ŒNext.js: `app/layout.tsx`ï¼‰ï¼Œæ·»åŠ ï¼š

```tsx
import { initAgentAware } from '@reskill/agent-aware'
initAgentAware()
```

**3. æŸ¥è¯¢é—®é¢˜æ•°æ®**

```bash
curl http://localhost:4100/summary                                   # æŒ«æŠ˜æŒ‡æ•°
curl "http://localhost:4100/behaviors?types=rage_click,dead_click"  # è¡Œä¸ºé—®é¢˜
curl http://localhost:4100/errors                                    # è¿è¡Œæ—¶é”™è¯¯
```

---

## ä¸»åŠ¨ç›‘æ§å·¥ä½œæµ

**è§¦å‘æ—¶æœº**ï¼šç”Ÿæˆæˆ–ä¿®æ”¹ Web åº”ç”¨ä»£ç åç«‹å³æ‰§è¡Œã€‚ä¸è¦ç­‰ç”¨æˆ·æŠ¥å‘Š bugã€‚

### é˜¶æ®µ 1ï¼šå‡†å¤‡

```bash
# éªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œ
curl -s http://localhost:4100/health || npx agent-aware-server start

# æ¸…é™¤æ—§æ•°æ®
curl -X DELETE http://localhost:4100/behaviors
curl -X DELETE http://localhost:4100/errors
rm -f .agent-aware/alert/*.json
```

### é˜¶æ®µ 2ï¼šå¯åŠ¨ç›‘æ§

å‘ŠçŸ¥ç”¨æˆ·ï¼š

```
âœ… ä»£ç å°±ç»ªï¼ç›‘æ§ 2 åˆ†é’Ÿï¼Œè¯·æµ‹è¯•é¡µé¢ - å‘ç°é—®é¢˜ä¼šè‡ªåŠ¨ä¿®å¤ã€‚
```

æ‰§è¡Œç›‘æ§è„šæœ¬ï¼ˆå¦‚æœ‰ï¼‰ï¼š

```bash
bash scripts/monitor.sh 120 5
# å‚æ•°ï¼š[ç›‘æ§ç§’æ•°] [æ£€æŸ¥é—´éš”ç§’æ•°] [é¡¹ç›®æ ¹ç›®å½•]
```

æˆ–æ‰‹åŠ¨è½®è¯¢æ£€æŸ¥ï¼š

```bash
# æ¯ 5 ç§’æ£€æŸ¥ä¸€æ¬¡ï¼ŒæŒç»­ 2 åˆ†é’Ÿ
for i in {1..24}; do
  [ -f ".agent-aware/alert/error.json" ] && cat .agent-aware/alert/error.json && break
  [ -f ".agent-aware/alert/behavior.json" ] && cat .agent-aware/alert/behavior.json && break
  sleep 5
done
```

### é˜¶æ®µ 3ï¼šå¤„ç†æ£€æµ‹åˆ°çš„é—®é¢˜

**é”™è¯¯ä¼˜å…ˆ**ï¼šerror.json æ¯” behavior.json ä¼˜å…ˆçº§æ›´é«˜ã€‚

```bash
# æ£€æµ‹åˆ°è¿è¡Œæ—¶é”™è¯¯
if [ -f ".agent-aware/alert/error.json" ]; then
  cat .agent-aware/alert/error.json
  curl -s "http://localhost:4100/errors?limit=5"
  # åˆ†æé”™è¯¯ï¼Œä¿®å¤ä»£ç ï¼Œç„¶åæ¸…é™¤ï¼š
  rm -f .agent-aware/alert/error.json
  curl -X DELETE http://localhost:4100/errors

# æ£€æµ‹åˆ°è¡Œä¸ºé—®é¢˜
elif [ -f ".agent-aware/alert/behavior.json" ]; then
  cat .agent-aware/alert/behavior.json
  curl -s "http://localhost:4100/behaviors?types=rage_click,dead_click&limit=5"
  # åˆ†æé—®é¢˜ï¼Œä¿®å¤ä»£ç ï¼Œç„¶åæ¸…é™¤ï¼š
  rm -f .agent-aware/alert/behavior.json
  curl -X DELETE http://localhost:4100/behaviors
fi
```

### é˜¶æ®µ 4ï¼šç”ŸæˆæŠ¥å‘Š

```bash
curl -s http://localhost:4100/summary
curl -s http://localhost:4100/errors/summary
```

æŠ¥å‘Šæ¨¡æ¿ï¼š

```
ğŸ“Š ç›‘æ§å®Œæˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… æŒ«æŠ˜æŒ‡æ•°ï¼š[X]/100
ğŸš¨ é”™è¯¯æ•°ï¼š[N]
ğŸ“‹ çŠ¶æ€ï¼š[è‰¯å¥½ / å»ºè®®ä¼˜åŒ– / éœ€è¦ä¿®å¤]
```

---

## é—®é¢˜å‚è€ƒè¡¨

| ç±»å‹ | ä¿¡å· | å«ä¹‰ | ä¿®å¤æ–¹å¼ |
|------|------|------|----------|
| é”™è¯¯ | `runtime` | JS è¿è¡Œæ—¶é”™è¯¯ | æŸ¥çœ‹å †æ ˆï¼Œä¿®å¤ä»£ç  |
| é”™è¯¯ | `unhandled_rejection` | Promise æœªå¤„ç† | æ·»åŠ  catch å¤„ç† |
| è¡Œä¸º | `rage_click` | ç”¨æˆ·ç‹‚ç‚¹ï¼ˆ3æ¬¡+ï¼‰ | æ·»åŠ  loading/åé¦ˆ |
| è¡Œä¸º | `dead_click` | ç‚¹å‡»æ— å“åº” | æ£€æŸ¥äº‹ä»¶ç»‘å®š |

| æŒ«æŠ˜æŒ‡æ•° | è¯„ä¼° | å»ºè®® |
|----------|------|------|
| 0-40 | è‰¯å¥½ | æ— éœ€å¤„ç† |
| 41-60 | ä¸€èˆ¬ | å»ºè®®ä¼˜åŒ– |
| 61+ | å·® | å¿…é¡»ä¿®å¤ |

---

## é€€å‡ºä¸æ¸…ç†ã€å¿…é¡»æ‰§è¡Œã€‘

### è§¦å‘æ¸…ç†çš„ä¿¡å·

å½“ç”¨æˆ·è¡¨è¾¾ä»¥ä¸‹æ„å›¾æ—¶ï¼Œæ‰§è¡Œæ¸…ç†ï¼š

- "æµ‹è¯•å®Œäº†"ã€"å®Œæˆäº†"ã€"done"ã€"okäº†"
- "å¯ä»¥äº†"ã€"æ²¡é—®é¢˜"ã€"looks good"
- "ä¸éœ€è¦ç›‘æ§äº†"ã€"åœæ­¢"
- ç”¨æˆ·æå‡ºæ–°çš„æ— å…³ä»»åŠ¡

### æ¸…ç†æ­¥éª¤

**æ­¥éª¤ 1ï¼šç§»é™¤ SDK åˆå§‹åŒ–ä»£ç **

ä»å…¥å£æ–‡ä»¶ä¸­åˆ é™¤ï¼š

```tsx
// åˆ é™¤è¿™ä¸¤è¡Œ
import { initAgentAware } from '@reskill/agent-aware'
initAgentAware()
```

**æ­¥éª¤ 2ï¼šåœæ­¢æœåŠ¡**

```bash
pkill -f "agent-aware-server" || true
```

**æ­¥éª¤ 3ï¼šåˆ é™¤ç›‘æ§æ•°æ®**

```bash
rm -rf .agent-aware
```

**æ­¥éª¤ 4ï¼šç¡®è®¤æ¸…ç†**

```
âœ… ç›‘æ§ç»“æŸï¼Œæ¸…ç†å®Œæˆï¼š
- å·²ç§»é™¤å…¥å£æ–‡ä»¶ä¸­çš„ SDK åˆå§‹åŒ–ä»£ç 
- å·²åœæ­¢æœåŠ¡è¿›ç¨‹
- å·²åˆ é™¤ .agent-aware ç›‘æ§æ•°æ®

é¡¹ç›®ä»£ç å·²æ¢å¤æ­£å¸¸çŠ¶æ€ã€‚
```

---

## ç›®å½•ç»“æ„è¯´æ˜

```
é¡¹ç›®ç›®å½•/
â””â”€â”€ .agent-aware/
    â”œâ”€â”€ alert/             # å‘Šè­¦æ–‡ä»¶ï¼ˆAgent ç›‘å¬ï¼‰
    â”‚   â”œâ”€â”€ error.json     # è¿è¡Œæ—¶é”™è¯¯å‘Šè­¦
    â”‚   â””â”€â”€ behavior.json  # è¡Œä¸ºé—®é¢˜å‘Šè­¦
    â””â”€â”€ detail/            # è¯¦ç»†æ•°æ®ï¼ˆHTTP API æŸ¥è¯¢ï¼‰
        â”œâ”€â”€ errors.json    # å®Œæ•´é”™è¯¯è®°å½•
        â””â”€â”€ behaviors.json # å®Œæ•´è¡Œä¸ºè®°å½•
```

---

## æ²Ÿé€šè¯æœ¯æ¨¡æ¿

**å¼€å§‹ç›‘æ§ï¼š**
```
âœ… ä»£ç å°±ç»ªï¼ç›‘æ§ 2 åˆ†é’Ÿï¼Œè¯·æµ‹è¯•é¡µé¢ - å‘ç°é—®é¢˜ä¼šè‡ªåŠ¨ä¿®å¤ã€‚
```

**å‘ç°å¹¶ä¿®å¤é—®é¢˜ï¼š**
```
âš ï¸ å‘ç°é—®é¢˜å¹¶å·²ä¿®å¤ï¼š
â€¢ é—®é¢˜ï¼š[æäº¤æŒ‰é’®æ— å“åº”]
â€¢ åŸå› ï¼š[ç¼ºå°‘ loading çŠ¶æ€]
â€¢ ä¿®å¤ï¼š[å·²æ·»åŠ  loading å’Œç¦ç”¨é€»è¾‘]
è¯·åˆ·æ–°é¡µé¢ç»§ç»­æµ‹è¯•ã€‚
```

**ç›‘æ§å®Œæˆï¼š**
```
ğŸ“Š å®Œæˆï¼çŠ¶æ€ï¼šè‰¯å¥½ï¼ˆæŒ«æŠ˜æŒ‡æ•°ï¼š15/100ï¼‰
éœ€è¦åº”ç”¨å»ºè®®çš„ä¼˜åŒ–å—ï¼Ÿ
```

---

## æ•…éšœæ’æŸ¥

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| æœåŠ¡æœªè¿è¡Œ | `npx agent-aware-server start` |
| æ— æ•°æ® | æ£€æŸ¥å…¥å£æ–‡ä»¶æ˜¯å¦æœ‰ `initAgentAware()` |
| æœªé‡‡é›†åˆ°è¡Œä¸º | ç¡®ä¿åœ¨æµè§ˆå™¨ä¸­å®é™…æµ‹è¯•äº†é¡µé¢ |
| æœåŠ¡ç«¯å£å†²çª | æ£€æŸ¥ 4100 ç«¯å£æ˜¯å¦è¢«å ç”¨ |

**è‡ªå®šä¹‰é¡¹ç›®æ ¹ç›®å½•ï¼š**

```bash
USER_PROJECT_ROOT=/path/to/project npx agent-aware-server start
# æˆ–
npx agent-aware-server start --project-root /path/to/project
```

---

## æœ€ä½³å®è·µ

1. **å…ˆå¯åŠ¨æœåŠ¡** - ç›‘æ§å‰ç¡®ä¿ server è¿è¡Œ
2. **å°½æ—©åˆå§‹åŒ–** - SDK åº”åœ¨åº”ç”¨å…¥å£æœ€å…ˆè°ƒç”¨
3. **æ¸…é™¤æ—§æ•°æ®** - æ¯æ¬¡ç›‘æ§å‰æ¸…ç©ºå†å²
4. **é”™è¯¯ä¼˜å…ˆ** - å…ˆä¿®å¤ errorï¼Œå†å¤„ç† behavior
5. **æ§åˆ¶æ—¶é•¿** - ç›‘æ§æœ€å¤š 2 åˆ†é’Ÿ
6. **åŠ¡å¿…æ¸…ç†** - æµ‹è¯•ç»“æŸåç§»é™¤ SDK ä»£ç å¹¶åˆ é™¤ `.agent-aware`
