---
description: "[Required] Bilingual Changeset Workflow - All code changes must generate bilingual changeset"
alwaysApply: true
---

# Bilingual Changeset Workflow [Required]

**âš ï¸ This is a mandatory rule. All code changes to published packages must generate a bilingual changeset.**

## Scope

The following packages require changeset for code changes:
- `@reskill/agent-aware` (`packages/sdk/`)
- `@reskill/agent-aware-server` (`packages/server/`)

## Exceptions

The following changes do **not** require a changeset:
- Documentation updates (README, comments, etc.)
- Development tool configurations (.cursor/, .github/, etc.)
- Example code (examples/)
- Specification files (specs/)
- Pure test refactoring (no functional changes)

## Changeset Format [Must Follow]

Each changeset must contain **both English and Chinese** descriptions in the following format:

```markdown
---
"@reskill/agent-aware": patch
---

English summary sentence

- English detail point 1
- English detail point 2

---

ä¸­æ–‡æ‘˜è¦

- ä¸­æ–‡è¯¦ç»†è¯´æ˜ 1
- ä¸­æ–‡è¯¦ç»†è¯´æ˜ 2
```

## Version Type Selection

- **major**: Breaking Changes
- **minor**: New features, new capabilities
- **patch**: Bug fixes, minor improvements, performance optimizations

## Workflow [Must Execute in Order]

```
1. [Required] Complete code changes and tests
   â†“
2. [Required] Create changeset file before commit
   â†“
3. [Required] Use pnpm changeset or manually create .changeset/<random-name>.md
   â†“
4. [Required] Changeset content must include English + Chinese bilingual descriptions
   â†“
5. [Required] Commit changeset file together with code changes
```

## Changeset File Location

```
.changeset/
â”œâ”€â”€ config.json          # changeset configuration
â”œâ”€â”€ README.md            # changeset documentation
â””â”€â”€ <random-name>.md     # individual pending changesets
```

## File Naming

Changeset filenames should use randomly generated adjective+noun combinations, for example:
- `brave-lions-dance.md`
- `happy-dogs-run.md`
- `cool-cats-sleep.md`

You can use the `pnpm changeset` command to auto-generate filenames.

## Examples

### Example 1: Bug Fix (patch)

```markdown
---
"@reskill/agent-aware": patch
---

Fix click event not captured on dynamically created elements

- Fixed event delegation to properly capture clicks on dynamic DOM elements
- Added mutation observer to track new elements

---

ä¿®å¤åŠ¨æ€åˆ›å»ºå…ƒç´ ä¸Šçš„ç‚¹å‡»äº‹ä»¶æœªè¢«æ•è·çš„é—®é¢˜

- ä¿®å¤äº†äº‹ä»¶å§”æ‰˜ä»¥æ­£ç¡®æ•è·åŠ¨æ€ DOM å…ƒç´ ä¸Šçš„ç‚¹å‡»
- æ·»åŠ äº† mutation observer æ¥è¿½è¸ªæ–°å…ƒç´ 
```

### Example 2: New Feature (minor)

```markdown
---
"@reskill/agent-aware": minor
"@reskill/agent-aware-server": minor
---

Add keyboard shortcut tracking support

- New `keyboardTracker` module for tracking keyboard shortcuts
- Support for custom key combination patterns
- Integration with existing behavior reporting system

---

æ·»åŠ é”®ç›˜å¿«æ·é”®è¿½è¸ªæ”¯æŒ

- æ–°å¢ `keyboardTracker` æ¨¡å—ç”¨äºè¿½è¸ªé”®ç›˜å¿«æ·é”®
- æ”¯æŒè‡ªå®šä¹‰æŒ‰é”®ç»„åˆæ¨¡å¼
- ä¸ç°æœ‰è¡Œä¸ºä¸ŠæŠ¥ç³»ç»Ÿé›†æˆ
```

### Example 3: Breaking Change (major)

```markdown
---
"@reskill/agent-aware-server": major
---

**Breaking Change**: Restructure output directory

- All output files now unified under `.agent-aware/` directory
- Alert files moved to `.agent-aware/alert/`
- Detail files moved to `.agent-aware/detail/`

**Migration Guide:**
1. Update file paths in your monitoring scripts
2. Alert file format changed from single object to array format

---

**ç ´åæ€§å˜æ›´**ï¼šé‡æ„è¾“å‡ºç›®å½•ç»“æ„

- æ‰€æœ‰è¾“å‡ºæ–‡ä»¶ç°åœ¨ç»Ÿä¸€åˆ° `.agent-aware/` ç›®å½•ä¸‹
- å‘Šè­¦æ–‡ä»¶ç§»è‡³ `.agent-aware/alert/`
- è¯¦ç»†æ•°æ®æ–‡ä»¶ç§»è‡³ `.agent-aware/detail/`

**è¿ç§»æŒ‡å—ï¼š**
1. æ›´æ–°ç›‘æ§è„šæœ¬ä¸­çš„æ–‡ä»¶è·¯å¾„
2. å‘Šè­¦æ–‡ä»¶æ ¼å¼ä»å•ä¸ªå¯¹è±¡å˜ä¸ºæ•°ç»„æ ¼å¼
```

## Prohibited Actions [Stop if Violated]

- ğŸš« **Do not** skip creating changeset after package code changes
- ğŸš« **Do not** write only English or only Chinese (must be bilingual)
- ğŸš« **Do not** write overly simple descriptions (e.g., just "fix bug")
- ğŸš« **Do not** commit changeset separately from code changes

## Checklist

Confirm before commit:
- [ ] Does the code change involve published packages?
- [ ] Has a changeset file been created?
- [ ] Does the changeset contain English description?
- [ ] Does the changeset contain Chinese description?
- [ ] Is the version type correct (patch/minor/major)?
- [ ] Is the changeset file in the same commit?
