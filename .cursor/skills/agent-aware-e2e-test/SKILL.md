---
name: agent-aware-e2e-test
description: E2E testing workflow for agent-aware project. Agent generates a random buggy React app, then uses the main agent-aware skill for real-time monitoring and auto-fix. This also validates the main skill's effectiveness.
---

# Agent-aware E2E æµ‹è¯• Skill

æœ¬ Skill ç”¨äºæµ‹è¯• agent-aware çš„å®Œæ•´åŠŸèƒ½ï¼ŒåŒæ—¶**éªŒè¯ä¸» Skill çš„å¯è¡Œæ€§**ã€‚

---

## ä¸ä¸» Skill çš„å…³ç³»

æœ¬ Skill æµç¨‹ï¼š
```
Phase 1: éšæœºç”Ÿæˆé¡¹ç›® â†’ Phase 2: ä½¿ç”¨ä¸» Skill ç›‘æ§ä¿®å¤
```

**Phase 2 ç›´æ¥ä½¿ç”¨ `skill/SKILL.md` ä¸­çš„ç›‘æ§å’Œä¿®å¤æµç¨‹**ï¼Œä¸é‡å¤ç¼–å†™ã€‚

---

## é‡è¦ï¼šæœ¬åœ°å¼€å‘ç‰¹æ®Šè¯´æ˜

ç”±äºåœ¨ **agent-aware monorepo å†…éƒ¨æµ‹è¯•**ï¼Œä¸ä¸» Skill æœ‰ä»¥ä¸‹ä¸åŒï¼š

### 1. ä¸éœ€è¦å®‰è£…åŒ…

ä¸» Skill è¦æ±‚ï¼š
```bash
npm install --save-dev @reskill/agent-aware-server @reskill/agent-aware
```

**æœ¬åœ°æµ‹è¯•è·³è¿‡æ­¤æ­¥éª¤**ï¼Œç›´æ¥ä½¿ç”¨ `packages/` ä¸­çš„ä»£ç ã€‚

### 2. å¯åŠ¨ Server æ–¹å¼ä¸åŒ

ä¸» Skillï¼š
```bash
npx agent-aware-server start
```

**æœ¬åœ°æµ‹è¯•ä½¿ç”¨ï¼š**
```bash
# å…ˆæ„å»º
pnpm build

# å¯åŠ¨ Serverï¼ˆæŒ‡å®šé¡¹ç›®è·¯å¾„ï¼‰
USER_PROJECT_ROOT=$(pwd)/examples/[é¡¹ç›®å] node packages/server/dist/cli.js start
```

---

# Phase 1: éšæœºç”Ÿæˆå‰ç«¯é¡¹ç›®

## 1.1 æ„å»º packages

```bash
pnpm build
```

## 1.2 éšæœºç”Ÿæˆé¡¹ç›®ã€Agent è‡ªç”±å‘æŒ¥ã€‘

åœ¨ `examples/` ç›®å½•ä¸‹ï¼Œ**éšæœºç”Ÿæˆä¸€ä¸ª React + Vite æŠ€æœ¯æ ˆçš„å‰ç«¯é¡¹ç›®**ã€‚

**è¦æ±‚ï¼š**
- é¡¹ç›®åç§°éšæœºï¼ˆå¦‚ `test-app-{timestamp}`ï¼‰
- æŠ€æœ¯æ ˆï¼šReact + Vite
- åŒ…å«å®Œæ•´çš„é¡¹ç›®ç»“æ„ï¼ˆpackage.jsonã€vite.configã€src/main.jsxã€src/App.jsx ç­‰ï¼‰
- åœ¨ `package.json` ä¸­æ·»åŠ  workspace ä¾èµ–ï¼š`"@reskill/agent-aware": "workspace:*"`
- åœ¨å…¥å£æ–‡ä»¶ä¸­åˆå§‹åŒ– SDKï¼š`initAgentAware({ debug: true })`
- **æ•…æ„åŸ‹å…¥ 2-3 ä¸ªé—®é¢˜**ï¼ˆdead_clickã€rage_clickã€runtime_errorï¼‰
- **æ·»åŠ æµ‹è¯•æç¤ºåŒºåŸŸ**ï¼Œå‘Šè¯‰ç”¨æˆ·å“ªäº›æŒ‰é’®ä¼šè§¦å‘ä»€ä¹ˆé—®é¢˜

**Agent å®Œå…¨è‡ªç”±å‘æŒ¥ï¼Œä¸é™åˆ¶å…·ä½“å†…å®¹å’Œæ ·å¼ã€‚**

## 1.3 æµ‹è¯•æç¤ºåŒºåŸŸã€é‡è¦ã€‘

åœ¨é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ªæç¤ºåŒºåŸŸï¼ŒåŒ…å«ï¼š
- å“ªäº›æŒ‰é’®/æ“ä½œä¼šè§¦å‘é—®é¢˜
- é¢„æœŸçš„é—®é¢˜ç±»å‹
- Runtime Error çš„è§¦å‘æ¡ä»¶å’Œé¢„æœŸé”™è¯¯ä¿¡æ¯

---

# Phase 2: ä½¿ç”¨ä¸» Skill ç›‘æ§ä¿®å¤

## 2.1 å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨ Serverï¼ˆæ›¿æ¢ [é¡¹ç›®å] ä¸ºå®é™…é¡¹ç›®åï¼‰
USER_PROJECT_ROOT=$(pwd)/examples/[é¡¹ç›®å] node packages/server/dist/cli.js start &

# è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œå®‰è£…ä¾èµ–å¹¶å¯åŠ¨
cd examples/[é¡¹ç›®å]
pnpm install
pnpm dev &

# æ¸…ç©ºæ—§æ•°æ®
curl -X DELETE http://localhost:4100/behaviors
curl -X DELETE http://localhost:4100/errors
```

## 2.2 æç¤ºç”¨æˆ·é¢„è§ˆ

```
âœ… æœåŠ¡å·²å¯åŠ¨ï¼

è¯·åœ¨ Cursor ä¸­æ‰“å¼€å†…ç½®æµè§ˆå™¨é¢„è§ˆï¼š
Cmd+Shift+P â†’ "Simple Browser: Show" â†’ è¾“å…¥ http://localhost:5173

æˆ–ç‚¹å‡»ç»ˆç«¯é“¾æ¥ http://localhost:5173
```

## 2.3 æŒ‰ç…§ä¸» Skill æ‰§è¡Œç›‘æ§

**ä»è¿™é‡Œå¼€å§‹ï¼Œå®Œå…¨æŒ‰ç…§ `skill/SKILL.md` çš„æµç¨‹æ‰§è¡Œã€‚**

---

# Phase 3: éªŒè¯ä¸æŠ¥å‘Š

## 3.1 ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š

```
ğŸ“Š E2E æµ‹è¯•æŠ¥å‘Š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ ç”Ÿæˆçš„åº”ç”¨: [åº”ç”¨ä¸»é¢˜]
ğŸ“ é¡¹ç›®è·¯å¾„: examples/[é¡¹ç›®å]

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ é¢„åŸ‹é—®é¢˜æ¸…å•:

   1. [é—®é¢˜ç±»å‹] - [æŒ‰é’®åç§°]
      åŸå› : [æè¿°]
      
   2. ...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” æ£€æµ‹ç»“æœ:

   Runtime Error: [è¯¦ç»†é”™è¯¯ä¿¡æ¯å’Œä»£ç ä½ç½®]
   Dead Click: [å…ƒç´ é€‰æ‹©å™¨å’Œè§¦å‘æ¬¡æ•°]
   Rage Click: [å…ƒç´ é€‰æ‹©å™¨å’Œè§¦å‘æ¬¡æ•°]

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ ä¿®å¤å†…å®¹:

   1. [å…·ä½“ä¿®å¤æ–¹æ¡ˆ]
   2. ...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… éªŒè¯ç»“æœ:

   | æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å |
   |-----|-------|-------|
   | æŒ«æŠ˜æŒ‡æ•° | X | Y |
   | Runtime Error | N | 0 |
   | Rage Click | N | 0 |

   ä¸» Skill æœ‰æ•ˆæ€§: âœ… éªŒè¯é€šè¿‡

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

# Phase 4: æ¸…ç†

```bash
pkill -f "agent-aware-server" || true
pkill -f "vite" || true

# å¯é€‰ï¼šåˆ é™¤æµ‹è¯•é¡¹ç›®
rm -rf examples/test-app-*
```

---

# æ€»ç»“

| é˜¶æ®µ | å†…å®¹ |
|-----|------|
| Phase 1 | Agent éšæœºç”Ÿæˆ React+Vite é¡¹ç›®ï¼ŒåŸ‹å…¥é—®é¢˜ |
| Phase 2 | ä½¿ç”¨ `skill/SKILL.md` ç›‘æ§ä¿®å¤ |
| Phase 3 | ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š |
| Phase 4 | æ¸…ç† |

**æ ¸å¿ƒä»·å€¼ï¼š**
1. æµ‹è¯• agent-aware å®Œæ•´åŠŸèƒ½
2. éªŒè¯ä¸» Skill æ–‡æ¡£å¯è¡Œæ€§
3. Agent è‡ªç”±åˆ›ä½œï¼Œæ›´æ¥è¿‘çœŸå®åœºæ™¯
